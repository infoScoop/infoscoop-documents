# 初始画面设定

关于用户第一次登录infoScoop OpenSource时所表示的画面构成的设定方法进行以下说明。


# 1 初始画面设定

infoScoop OpenSource，用户能自由定义infoScoop OpenSource的小工具的状态和配置，各用户界面的状态被数据库自动地保存。
用户再次表示infoScoop OpenSource界面的话，以原有被数据库保存的自定义用户信息为基础构筑用户用的画面。
因为用户最初表示infoScoop OpenSource时候没有用户自定义信息，有必要准备用户的共同的缺省的设定。

在这里，关于用户最初登录infoScoop OpenSource时的界面的构成方法进行以下说明。
另外也可以根据用户所属信息切换初始画面。
infoScoop OpenSource 是从HTTP头域得到用户所属信息。
在初始画面设定管理中，有以下设定对象。

1. 命令栏
2. 各个标签固定领域
3. 各个标签个性化领域


## 2 初始画面管理界面

这里开始要关于初始画面的设定方法，主要是关于管理界面的初始画面管理的操作方法进行说明。
选择[布局]后再选择[初始画面]，用以设定初始画面的画面被表示。

设定对象以标签形式被表示，[commandbar]是以命令栏，[tab0][tab1]…[tabn]从左到右的顺序包含标签的设定。
在各标签里面角色信息被表示。
初始画面设定，对角色(用户的所属信息)进行设定。
如果全部的用户使用同样的初始画面时候，只使用「defaultRole」。
单击设定对象的用户角色一行里的编辑图标后，编辑画面被表示。
从管理画面被设定的标签全部成为固定标签。
初始画面的编辑画面在命令栏和标签里是不同的。
命令栏的编辑画面由以下的项目构成。

    * 角色名
    * 主体者
    * 正规表示
    * 固定领域设定：表示命令栏上可以配置的组件一览

各标签的编辑画面由以下的项目构成。

    * 角色名
    * 主体者
    * 正规表示
    * 固定领域设定：设定布置固定的小工具
    * 个性化领域 初始表示小工具设定：显示在初期表示时被被配置的小工具的一览表。


## 3 context菜单

关于初始画面的管理画面的context菜单进行说明。

<table>
    <thead>
        <tr>
            <th>图标</th><th>名称</th><th>说明</th>
        </tr>
    </thead>
    <tbody<
        <tr>
            <td><img src="../../images/database_refresh.gif" alt="初期化アイコン"></td>
            <td>初始化自定义信息</td>
            <td>
                强制地消去全部指定了的用户的定自定义信息。参照<a href="#initialize_customize">9 自定义信息的初始化</a>
            </td>
        </tr>
        <tr>
            <td><img src="../../images/apply_changes.gif" alt="変更を適用するアイコン"></td>
            <td>适用变更</td>
            <td>
                单击后，到现在为止的编辑操作(标签的追加/删除，角色的追加/编辑/删除/移动，命令栏的设定，标签的设定)被适用(保存数据）<br>
                <strong>注意</strong> 最后不单击这个图标，编辑操作被废弃。
            </td>
        </tr>
        <tr>
            <td><img src="../../images/preview.gif" alt="全体プレビューアイコン"></td>
            <td>整体预览</td>
            <td>
                在另外窗口表示现在被适用的构成信息。<br>
                这个图标只有拥有「菜单」权限的管理员用户才可以使用。
            </td>
        </tr>
    </tbody>
</table>


## 4 角色的追加/编辑/删除

可以根据用户的角色(所属信息)切换初始画面的构成。
在各个初始画面对各个用户信息进行设定。
不需要对每个角色切换初始画面，把全部用户的初期画面设定成一样时，打开「defaultRole」的编辑画面，请参照<a href="#command_bar">5 命令栏的构成</a>继续操作。
以下，关于角色一览画面的构成及操作方法进行说明。

* 角色一览:每个角色设定初始画面。开始只有defaultRole被准备。如果为infoScoop的利用者准备单一的初始画面的话，需要对defaultRole进行设定。
    * [角色名]: 角色的表示用标签。 
    * [主体者]: 选择角色的种类。
    * [正规表示]: 根据正则表达式进行角色的判断。
  角色名/主体者/正规表示，输入各自适当的值。点击角色/正规表示就可以编辑。

* 操作图标
    * 追加图标:对角色一览追加新的设定。
    * 编辑图标:表示相符合的角色的初期表编辑画面。
    * 删除图标:删除相符合的角色。defaultRole不能删除。

* 排序:通过拖放更换顺序。

对用户的角色的正则表达式的判断从上到下按顺序被进行。
下面关于角色的设定进行说明。

<table>
    <thead>
        <tr>
            <th>设定项目</th><th>说明</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>角色名</td>
            <td>
                指定权限名称。<br>
                角色名只是个标签没有任何系统意义，请指定对应的组织名称等。
            </td>
        </tr>
        <tr>
            <td>主体者</td>
            <td>
                选择角色的种类。<br>
                主体者根据设定映射到HTTP头的值，关于设定方法请参照<a href="../installation-guide/customizing-web-application-module.md#http-header">5 安装指南 / 定义HTTP头域作为角色信息</a>
            </td>
        </tr>
        <tr>
            <td>正则表达式</td>
            <td>
                以正则表达式来指定使用该设定的权限的模式。<br>
                当登录时的权限匹配这个模式的时候，相符合的标签的布局作为初期作为画面被适用。<br>
                正规表示的判断，对于不同主体者类别从上到下按顺序判定，最初匹配的设定被适用。<br>
                <strong>注意</strong> 正则表达式必须记述Java中可以使用的正规表示。
            </td>
        </tr>
    </tbody>
</table>

单击[追加]后，新的角色的追加画面和初始画面的设定画面一起被表示。
设定项目与角色一览画面是一样的。
单击[返回到一览]后，将返回角色一览画面。


### 4.1 不使用默认

由于把默认的角色「defaultRole」设定为无效，只对持有相符合的角色显示标签。
这个设定，在命令栏上tab0(home tab)以外有效。
在标签内，如果勾选角色追加图标的右侧的「不使用默认」的话，会使得这一设定无效。


<a name="command_bar"></a>
## 5 关于命令栏的构成

关于命令栏的固定领域设定方法进行以下说明。
固定领域的设定项目如下。

* 电光广告牌
* 热门搜索
* 首页
* 更改文字大小
* 回收站
* 全体设定
* 认证信息一览
* 至管理画面
* 退出

固定领域的组件一览的顺序对应门户界面中命令栏的表示顺序。
上述的每一个项目都附带[排序]和[表示/非表示]选项

* [排序]:通过拖放各项目左侧被表示的[排序]图标可以更换顺序。
* [表示/非表示]:表示/非表示处打勾代表表示，不打勾的话代表从命令栏中删除。

此外，命令栏上配置可能的组件里面，有必须用其他途径设定的项目。以下进行说明。

* 电光广告牌 ：单击电光广告牌小工具和电光广告牌项目的编辑图标的话，编辑RSS feed的URL的对话框被表示。
* 热门搜索 ：点击热门搜索小工具项目的编辑图标的话，编辑排名的URL一览(XML形式)的对话框被表示。 设定内容如下。

<table>
    <thead>
        <tr>
            <th>设定项目</th><th>说明</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>
                <strong>urls要素</strong>
            </td>
            <td>包含url要素</td>
        </tr>
        <tr>
            <td>
                <strong>url要素</strong>
            </td>
            <td>设定排名信息。</td>
        </tr>
        <tr>
            <td>title属性</td>
            <td>
                排名的标题。<br>
                热门搜索小工具的标签的标题。
            </td>
        </tr>
        <tr>
            <td>url属性</td>
            <td>设定设定提供提要排名信息的RSS的网址。</td>
        </tr>
    </tbody>
</table>


### 5.1 关于搜索关键字排名的URL

排名是关键字排名生成服务的URL(http://localhost:8080/infoscoop/kwdsrv)被指定。

```
http://localhost:8080/infoscoop/kwdsrv
```

通过指定URL参数，能自定义生成的排名。
编辑服务URL的大写斜体的地方。

_关键字排名生成URL_

<pre><code>
&#60;urls&#62;
    &#60;url title='検索キーワードランキング'
            url='http://localhost:8080/infoscoop/kwdsrv?baseDate=<strong><i>TODAY</i></strong>&period=<strong><i>30</i></strong>&rankingNum=<strong><i>20</i></strong>/&#62;
&#60;/urls&#62;
</code></pre>

关于各参数的设定进行以下说明。

<table>
    <thead>
        <tr>
            <th>参数名</th><th>说明</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td colspan="2">
                <strong>baseDate</strong>
            </td>
        </tr>
        <tr>
            <td>设定内容</td>
            <td>
                指定搜索关键词排名被作成的统计开始时间。<br>
                <strong>从指定了的统计开始日期和时间开始以前在PERIOD指定了的期间的搜索关键字排名数据被创建。</strong>
            </td>
        </tr>
        <tr>
            <td>詳細</td>
            <td>
                TODAY : 工具实行日的0点作为统计开始日期时间。如果设定成TODAY，排名数据被服务器缓存，一天中只统计一次。通常请设定为TODAY。<br>
                yyyyMMddHH : 以左边日期格式指定的时间作为统计开始时间。
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <strong>period</strong>
            </td>
        </tr>
        <tr>
            <td>设定内容</td>
            <td>
                指定搜索关键字创建的期间(天数)。<br>
                从BASE_DATE指定的日期时间开始指定期间的搜索关键字数据被创建。<br>
                最大值是60。
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <strong>rankingNum</strong>
            </td>
        </tr>
        <tr>
            <td>设定内容</td>
            <td>
                设定提要的排名信息的RSS的URL。<br>
            </td>
        </tr>
    </tbody>
</table>

**注意** 搜索关键字排名创建工具本版本上被删除了。今后只是作为提供关键字排名生成服务。如果利用搜索关键字排名创建工具时候，请到本公司Web支持进行询问。

<a name="5_2_add_link_html"></a>
### 5.2 追加链接/追加HTML

* 追加链接
  单击[追加链接]后设定画面被表示，在命令栏上可以追加链接。
  各设定内容如下。

<table>
    <thead>
        <tr>
            <th>设定项目</th><th>说明</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>表示名称</td>
            <td>链接的显示名称</td>
        </tr>
        <tr>
            <td>链接URL</td>
            <td>链接的URL</td>
        </tr>
        <tr>
            <td>链接表示处</td>
            <td>
                指定链接目标。
                <ul>
                    <li>新窗口: 在新的窗口上表示链接目标。</li>
                    <li>门户内框架：在门户内框表示链接目标。</li>
                </ul>
            </td>
        </tr>
    </tbody>
</table>

  单击[追加]按钮后链接被追加到一览表上。被追加了的链接不能切换表示/非表示。

* 追加HTML

  单击[追加HTML]的话，以下的设定画面被表示，命令栏上能追加HTML。
  各设定内容如下。

<table>
    <thead>
        <tr>
            <th>设定项目</th><th>说明</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>表示名称</td>
            <td>在一览表里显示的名称</td>
        </tr>
        <tr>
            <td>HTML</td>
            <td>记述在命令栏上表示的HTML。</td>
        </tr>
    </tbody>
</table>


## 6 标签的追加/删除

固定标签可以复数设定。


<a name="tab_add"></a>
### 6.1 标签的追加

要追加标签的话，点击[>>追加标签]链接。


<a name="tab_delete"></a>
### 6.2 标签的删除

要删除标签，单击各标签上[关闭]图标。
确认对话框被表示后请单击[OK]。


<a name="tab_layout"></a>
## 7 标签的构成

各标签的设定有，标签名，固定领域及个性化领域的初始表示的设定。
关于各设定项目，对以下的项详细地说明。


### 7.1 标签名

指定标签名称。
标签名称的最大长度限制为80字符。


### 7.2 固定领域设定

在[选择布局]按钮和[HTML编辑]按钮下面，在固定领域里想要设定的小工具的设定框被表示。

* 布局设定
  固定领域的布局的变更方法有从模板选择的方法和和直接记述HTML的方法。
  从模板中选择布局的时候，单击[选择布局]按钮后，布局选择画面将被表示。
  把鼠标放至布局上时布局会反转。在反转的状态单击后所选布局被使用。

  **注意** 变更布局的话，现在的设定被覆盖，全部的小工具成为未设定。

  如果直接编辑HTML，单击[HTML编辑]按钮。

* 小工具设定
  单击各箱的编辑用图标的话，小工具设定用的对话框被表示。
  固定领域上面可以设定以下小工具。

    * RSS阅读器
    * 通知
    * 带图像通知
    * 迷你浏览器
    * 截取迷你浏览器
    * 日历
    * 信息
    * 热门小工具
    * 小工具(小工具一览里被表示的小工具)
    * 小工具(URL指定)

  选择[小工具种类]后，根据所选小工具相应的设定项目被显示。
  输入各个设定项目的必须项目后，点击[预览]，设定的内容的小工具的预览被表示。


#### 7.2.1 小工具头的设定

以下，关于在初始画面设定中可以选择的小工具共同设定进行说明。

<table>
    <thead>
        <tr>
            <th>设定项目</th><th>说明</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>标题</td>
            <td>
                小工具的标题。必须。<br>
                标题最大可以输入80字符。
            </td>
        </tr>
        <tr>
            <td>标题链接</td>
            <td>
                小工具的标题带的链接的URL。<br>
                URL最大可以输入1024字节。
            </td>
        </tr>
    </tbody>
</table>


#### 7.2.2 小工具共同的设定

对所有的小工具共通的设定进行说明。

<table>
    <thead>
        <tr>
            <th>设定项目</th><th>说明</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>不表示头</td>
            <td>
                选为有效的时候，小工具头不被表示<br>
                只有在固定领域才可以选择的项目。
            </td>
        </tr>
    </tbody>
</table>


#### 7.2.3 把小工具的信息设定到标题上

RSS阅读器和迷你浏览器是从被指定了的URL取得信息然后表示,在选择这样的小工具的话，在用来指定URL的文本框的右侧[获取标题信息]按钮被表示。
单击[获取标题信息]按钮后，将用从指定的URL中取得的信息来设定标题和标题链接。
像TODO一览和警报一样并不是从外部取得信息的小工具，或者像日历小工具那样和URL并不是一对一指定的小工具的场合，作为菜单项目的标题来设定小工具的标题的[设定为标题信息]按钮被表示。
单击[设定为标题信息]按钮的话，标题上小工具的种类被输入。


#### 7.2.4 预览

输入各个设定项目的必须项目后单击[预览]按钮后，已设定内容的小工具的预览被表示。


#### 7.2.5 还原到默认值

在小工具设定项目下部，[返回到默认值]按钮被表示。各设定项目返回到默认值。默认值是在小工具管理中被设定的数值。


#### 7.2.6 小工具 URL指定

在HTTP服务器上被配置的小工具，直接对菜单能设定URL。
用小工具种类选择[小工具(URL指定)]的话，以下的设定项目被表示。

<table>
    <thead>
        <tr>
            <th>设定项目</th><th>说明</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>小工具URL</td>
            <td>
                指定小工具文件的URL。<br>
                URL最大可以输入<strong>1022</strong>字节。<br>
                单击[获取标题信息]按钮的话，从指定了的URL的小工具文件取得标题和链接，设定菜单链接设定的[标题]和[标题链接]。
            </td>
        </tr>
    </tbody>
</table>


### 7.3 个性化领域 初始表示小工具设定

在个性化领域设定上，用户可以设定初始登录时被默认配置的小工具。
设定个性化领域的时候，可以设定小工具的一览表。
在个性化领域中，小工具按照一览表从上到下的顺序被表示。
能够改变排列，和选择配置小工具的列。


#### 7.3.1 小工具的登录

* 追加新的一览项目
单击个性化领域设定项目的最上方的追加按钮的话，小工具没被设定的「未设定」的行被追加。
* 表示小工具设定对话框
设定小工具需要单击被追加了的行的编辑图标。
小工具设定对话框被表示。
* 小工具登录
个性化领域上设定的小工具能从用菜单设定了的小工具中选择。
切换顶部菜单和侧面菜单的下拉一览只是在对顶部菜单(属性siteAggregationMenuURL)和侧面菜单(属性sideMenuURL)指定不同的URL时候被表示。
在小工具设定对话框中菜单的信息用一览表的形式被表示，单击标题后下一层的菜单一览表被表示。
在对个性化领域要设定小工具时候，单击在小工具标题左面被表示的选择按钮。
选择了的小工具的详细被表示。
单击[OK]按钮选择了的小工具在个性化领域被登录。


#### 7.3.2 复合RSS阅读器的初期配置设定

复合RSS阅读器(MultiRssReader)小工具能用，用小工具选择对话框统一的按钮，复合RSS阅读器设定复数的菜单统一设定。
设定步骤如下。

1. 选择复合RSS阅读器中包含的菜单
2. 单击[归结]的话，小工具设定的详细信息在一览表中被表示。
3. 单击[OK]按钮，选择的小工具设定被被登录到个性化领域。


#### 7.3.3 表示位置的规则

个性化领域的小工具是被指定了队列从上开始按顺序被配置。


#### 7.3.4 列数的设定

初期要设定表示的列数的话，单击[列]。
列数变更用的对话框被表示。
设定次序如下。
1. 从下拉选择列数，变更列数。
2. 点击[OK]按钮设定被适用。
另外，这个设定单击[适用变更]前不被服务器保存。


#### 7.3.5 关于不能复数拖拽小工具的规则

不能复数拖拽的小工具的重复检查只是在标签内被进行。因为没进行跨标签的检查，在初始画面设定的个性化领域 初始表示小工具设定，不能复数拖拽的菜单要是在别的标签上的话，复数可以设定。
可是，如果小工具重复被设定了时候，在用户初期登录的时候，在画面构成中，被后方的标签设定了的小工具被删除。
譬如，如果对标签1和标签2，从同样的菜单设定配置了RSS阅读器，只是标签1的RSS阅读器在用户第一次登录的时候有效，标签2的RSS阅读器不被配置。


#### 7.3.6 设定了的小工具从菜单设定删除

如果在从自定义做领域设定了的小工具的定义符合的菜单删除和菜单本身被删除了时候，那行返回到未设定的状态。


#### 7.3.7 不使用个性化领域

不使用个性化领域只使用固定领域的标签的场合，勾选「不使用个性化领域」。


## 8 关于对用户画面的适用

初始画面设定的变更在用户画面被适用的规则根据初期登录的时候和用户是不是已经登录完毕不同。


### 8.1 初期登录的时候

如果用户第一次表示infoScoop OpenSource时候，初始画面根据设定上由设定画面构成。


### 8.2 已登录用户

初始画面设定的变更在用户再装载浏览器的时候被反映。
反映规则在每个变更地方用以下的规则适用。


#### 8.2.1 命令栏的构成变更

根据<a href="#command_bar">5 命令栏的构成</a>的方法变更了标签的构成之后，用户重载浏览器的时候，用户画面的命令栏被复写上面的字更新。
如果以<a href="#tab_add">6.1 标签的追加</a>的方法追加了固定标签的话，在用户界面用户重载了浏览器的时候，追加了的固定标签在固定标签和动态标签(用户追加了的标签)之间被追加。
例子) 用户画面的标签构成象以下一样的情况

```
[固定标签1][动态标签1][动态标签2]
```

追加固定标签[固定标签2]的话，浏览器读入以后，用户画面的标签构成自动地像以下一样地被变更。

```
[固定标签1][固定标签2] [动态标签1][动态标签2]
```


#### 8.2.2 标签的删除

如果以<a href="#tab_delete">6.2 标签的删除</a>的方法删除了固定标签，在用户画面，固定标签不被删除，被删除了的固定标签成为固定领域没有了的动态标签(用户追加了的标签)。同时，被动态标签变更了的标签自动地移动到右侧。
例子)用户画面的标签构成象以下一样的情况

```
[固定标签1][固定标签2] [动态标签1][动态标签2]
```

删除固定标签[固定标签2]的话，浏览器读入以后用户画面的标签构成自动地像以下一样地被变更。

```
[固定标签1] [動的标签1][動的标签2] [被动态标签变更了的固定标签2]
```


#### 8.2.3 标签的构成变更

根据<a href="#tab_layout">7 标签的构成</a>的方法变更了标签的构成之后，用户重载浏览器时，用以下的规则被反映到用户画面。

* 固定领域的布局变更时候：
  用户画面的固定领域全部被管理者设定重写。被更新了的小工具的用户设定返回到初始值。

* 变更固定领域设定的小工具设定：
  只变更了设定的小工具，用管理者设定覆写。被更新了的小工具的用户设定返回到初始值。

* 变更个性化领域的小工具设定的时候：
  个性化领域的小工具的配置信息，只在初期登录的时候有效，即使再读入infoScoop OpenSource也不被反映。


<a name="initialize_customize"></a>
## 9 自定义信息的初始化

自定义信息的初始化指，删除指定了的用户的自定义信息(被用户设置了小工具，被追加了的标签，全部设定)，通过初始画面设定的设定构成画面。

**注意**  在自定义信息的初始化时被删除了的小工具进入回收站。

要执行自定义信息的初始化，点击初始画面管理画面的[自定义信息初始化]链接。
自定义信息初始化对话框被表示。

在输入用户名地方，输入初始化自定义信息的用户名后，请按OK按钮。指定了的用户的自定义信息被初始化。
指定了的用户在表示门户界面时，浏览器的reload被强制地执行。


[Add icon]: ../../images/add_menu_tree.gif
[Drag icon]: ../../images/drag.gif
[Gadget placement by drag-and-drop operation]: images/default-screen/default-layout-settings-1.png
[The personailzed area of first login]: images/default-screen/default-layout-settings-2.png
