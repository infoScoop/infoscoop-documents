# プロパティ管理

infoScoop OpenSourceの各種システムプロパティの説明とプロパティを設定するプロパティ管理画面について説明します。

## 1 プロパティ管理画面

プロパティ管理画面では、各システムプロパティの変更ができます。

infoScoopOSS管理画面のメニューから[プロパティ]を選択すると、プロパティ管理画面が表示されます。

プロパティ管理画面におけるコントロールの各機能は以下の通りです。

<table>
    <thead>
        <tr>
            <th>アイコン</th><th>名前</th><th>説明</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><img src="../../images/display_all_properties.gif"></td>
            <td>全てのプロパティを表示</td>
            <td>初期状態では非表示のプログラムの内部的な動作を制御するプロパティおよび現バージョンではサポートされていない隠しプロパティを表示します。</td>
        </tr>
        <tr>
            <td><img src="../../images/refresh.gif"></td>
            <td>読み直し</td>
            <td>前回変更を適用した状態を表示します。</td>
        </tr>
        <tr>
            <td><img src="../../images/apply_changes.gif"></td>
            <td>変更を適用する</td>
            <td>変更を適用（データを保存）します。<br/>
            <b>注意</b> 最終的にこのアイコンをクリックしないと、編集操作は破棄されます。
            </td>
        </tr>
     </tbody>
</table>

## 2 メニューに関連するプロパティ
メニュー設定に関するプロパティは以下の通りです。


### 2.1 displayTopMenu

トップメニューを表示／非表示を設定します。

    表示：トップメニューを表示します。
    非表示：トップメニューを表示しません。
    デフォルト：表示

### 2.2 displaySideMenu

サイドメニューの表示／非表示、および、トップメニューと構成を同じにするかどうかを設定します。

    表示：サイドメニューを表示します。
    非表示：サイドメニューを表示しません。
    トップと同じ構成：サイドメニューをトップメニューの構成で表示します。
    デフォルト：表示

### 2.3 menuAutoRefresh

メニューの自動更新を有効にするか否かを設定します。この設定は、トップメニューおよびサイドメニューの両方が対象となります。

    有効(チェック)：メニューが自動更新の対象となります。
    無効(チェック無し)：メニューが自動更新の対象外となります。
    デフォルト値：無効

### 2.4 menuLockTimeout

メニュー管理画面でメニューツリーを編集中に何もしないで一定の時間が経過した場合、自動的に編集ロックが解除されます。その間隔を設定します。

    分単位で数値を指定します。
    デフォルト値：30

### 2.5 sideMenuTabs

サイドメニューのタブの表示/非表示を設定します。

タブの識別子をリストで指定します。各タブの識別子は以下のとおりです。

    sidemenu：[サイドメニュー]タブを表示します。
    addContent：[コンテンツの追加]タブを表示します。
    mySiteMap：[マイサイトマップ]タブを表示します。

**注意** 本プロパティの変更はサポート対象外になります。バージョンアップ時の互換性は保障されません。

## 3 Ajaxリクエストに関するプロパティ

infoScoopは、各種設定やデータの読み込みをAjaxリクエストと呼ばれる通信方式により行います。

詳しくは、[プロキシ管理][Proxy Settings]を参照ください。

Ajaxリクエストに関するプロパティは以下の通りです。

### 3.1 ajaxRequestTimeout

Ajaxリクエストの最大待ち時間。

    ミリ秒単位で数値を指定します。
    デフォルト値：15000

この設定により、本製品のAjaxプロキシを経由して情報を取得する際、15秒以上レスポンスに時間が掛かるコンテンツを表示することはできません。

**注意** 本プロパティは、アプリケーションサーバーのチューニングも合わせて必要になります。

### 3.2 ajaxRequestRetryCount

Ajaxリクエストがタイムアウトした場合の再試行回数。

Ajaxリクエストは、ajaxRequestTimeoutプロパティに設定された時間以内に完了しない場合、再度リクエストキューの最後に追加されます。

ajaxRequestRetryCountで選択された回数だけ上記の操作を繰り返します。

    0回から2回を指定可能です。
    デフォルト値：2(回)

### 3.3 refreshInterval

各ガジェットの自動更新の間隔。自動更新の詳細については、ユーザーガイドの[自動更新][Auto Update]を参照ください。

    単位は分で数値を指定します。
    デフォルト値：10(分)

### 3.4 widgetRefreshInterval

ガジェット間の自動更新間隔。自動更新の1ターン内のガジェットの更新間隔を設定します。

詳細については、ユーザーガイドの<a href="../user-guide/auto-update.md#updateDurationInTurn">1ターン内でのガジェットの更新間隔</a>を参照ください。

    単位は秒で数値を指定します。
    デフォルト値：20(秒)

**注意** 本プロパティは、アプリケーションサーバーのチューニングも合わせて必要になります。

### 3.5 subWidgetRefreshInterval

まとめてRSSリーダー内のRSSリーダーの自動更新間隔。

    単位はミリ秒で数値を指定します。
    デフォルト値：500(ミリ秒)

**注意** 本プロパティは、アプリケーションサーバーのチューニングも合わせて必要になります。

## 4 RSSを扱うガジェットに関するプロパティ

お知らせや RSSリーダーなどの RSSを扱うガジェット共通のプロパティは、以下の通りです。

### 4.1 rssPageSize

RSSリーダーの自動ページング機能で一度に読み込むアイテムの件数。

    数値を指定します。
    デフォルト値：25(件)

### 4.2 rssMaxCount

RSSを表示できる最大数を指定します。

    数値を指定します。
    デフォルト値：-1(全件)

負の整数を指定した場合は全件取得します。

### 4.3 freshDays

お知らせ/画像付きお知らせ/RSSリーダー/まとめてRSSリーダーで新着アイコンが表示される時間。

    単位は日で数値を指定します。
    デフォルト値：1(日)

## 5 ユーザーカスタマイズに関するプロパティ

ユーザーのカスタマイズに関するプロパティは以下の通りです。

### 5.1 maxTabs

ユーザーが追加可能なタブの最大数を指定します。

    数値を指定します。
    デフォルト値:50

### 5.2 maxColumnNum

パーソナライズエリアの最大列数を指定します。変更できないプロパティです。

    数値を指定します。
    デフォルト値:10

**注意** 本プロパティの変更はサポート対象外になります。バージョンアップ時の互換性は保障されません。

### 5.3 commandQueueWait

ユーザーのカスタマイズ情報を保存する間隔を指定します。

    単位は秒で数値を指定します。
    デフォルト値：30(秒)

カスタマイズ情報を保存するリクエストは、infoScoop独自のセッションチェックの機構にも利用されるため、ユーザーが画面の変更を行わない場合もcommand
QueueWaitに設定した間隔で送信されます。

カスタマイズ情報はブラウザを閉じたときまたは他のサイトに移動したときにも保存されます。


### 5.4 defaultTheme

ユーザーが初めてログインした時に適用されるデフォルトのデザインを指定します。

    JavaScriptの連想配列を指定します。
    デフォルト値：
    {
        background : {
            image : './skin/imgs/theme/stripe.png'
        },
        widget : {
            header : {
                background : {
                    image : './skin/imgs/theme/widget_header.png'
                }
            },
            border : {
                color : '#BCBCBC',
                radius : '0px'
            },
            shade : {
                color : '#EEE'
            },
            subheader : {
                background : {
                    color : '#EEEEFF'
                }
            }
        }
    }

**注意** 本プロパティの変更はサポート対象外になります。バージョンアップ時の互換性は保障されません。


## 6 ユーザー操作ログに関するプロパティ

本製品は、検索やリンククリックなど特定のユーザー操作をリポジトリデータベースに保存する仕組みがあります。

この情報はランキングガジェットおよびアクセス統計などに利用されます。

<a name="6_1_accessLogEntry"></a>
### 6.1 accessLogEntry

お知らせやRSSリーダーなど、RSSを扱うガジェットのアクセスログを保存するか否かを指定します。

    有効(チェック)：データを保存する。
    無効(チェック無し)：データを保存しない。
    デフォルト値：有効

### 6.2 keywordEntry

検索キーワードランキングデータを保存するか否かを指定します。

    有効(チェック)：データを保存する。
    無効(チェック無し)：データを保存しない。
    デフォルト値：有効

### 6.3 logCommandQueueWait

本製品のサーバーに検索キーワード/アクセスログを送信する間隔を指定します。

    単位は秒で数値を指定します。
    デフォルト値：3600(秒)

検索キーワード/アクセスログはブラウザを閉じたときまたは他のサイトに移動したときにも送信されます。

### 6.4 logStoragePeriod

アクセスログの保存期間を指定します。保存期間が切れたログは自動的にデータベースから削除されます。

    単位は日で数値を指定します。
    デフォルト値：365(日)

0以下の整数を指定した場合は、ログを無期限に保存します。

## 7 レイアウトに関するプロパティ

レイアウトに関するプロパティは以下の通りです。

### 7.1 displayInlineHost

メニューやガジェット内の各リンクをクリックした際、そのリンク設定(メニューはリンク表示先設定、ガジェットはコンテンツ表示モード)が自動判別に設定されていた場
合、インラインフレームで表示するホスト名を指定します（参照：「コンテンツ表示モード」）。

    デフォルト値：設定なし
    設定例）
    hostname:80
    hostname:8080
    192.168.11.23

ホストが同じでもポートが異なる場合は別の設定として判定されます。

全てのリンクをインラインフレームで表示したい場合は、一番目の設定に「*」(アスタリスク一文字）を指定してください。

### 7.2 fixedPortalHeader

スクロールバーの位置を設定します。

    有効(チェックあり)：タブ内にスクロールバーが表示され、ヘッダーは常に表示されます。
    無効(チェック無し)：ウィンドウ全体にスクロールバーを表示します。
    デフォルト値：無効

## 8 ログインおよびセッションに関するプロパティ

### 8.1 lastAccessTimeFormat
本製品の標準ログイン画面ではユーザーの最終アクセス日時を保存する機能と保存した日時を表示する機能があります。lastAccessTimeFormatは保存した最終アクセス日時を表示する際の書式を指定します。
なお指定可能な書式については[ガジェット管理／7.2 使用できる日付フォーマット][Gadget Settings]を参照してください。

    日付／時刻パターン文字列で指定します。
    デフォルト値：yy/MM/dd HH:mm

システムが認識できない文字列が記述された場合は、デフォルト値を書式として利用します。

### 8.2 loginStateKeepPeriod

本製品の標準ログイン画面ではブラウザにログイン状態を保存する機能があります。loginStateKeepPeriodはログイン状態が保存される期間を指定しま
す。

    単位は日で数値を指定します。
    デフォルト値：7(日)

0以下の整数を指定した場合は、ログイン状態を保存する機能が無効になります。

## 9 システム構成に関するプロパティ

システム構成を変更した際に、設定する必要があるプロパティは以下の通りです。

### 9.1 tabLockTimeout
初期画面管理画面でタブ（またはコマンドバー）を編集中に何もしないで一定の時間が経過した場合、自動的に編集ロックが解除されます。その間隔を設定します。

    分単位で数値を指定します。
    デフォルト値：60

### 9.2 staticContentURL

infoScoop OpenSourceの静的ファイルが格納されている場所をURLで指定します。

通常はパフォーマンス向上のため、WEBサーバーに静的ファイルのコピーを配置し、そのURLを指定します。特にIEはCSS内の画像、javascriptで生成され
たimgタグの画像をキャッシュすることができませんので、mod_expiresの設定も合わせて利用します。

静的コンテンツは、アーカイブを解凍したディレクトリinfoscoop/staticContentにまとまっています。staticContentディレクトリを
Apacheの適当な位置に配置し、mod_expiresモジュールの設定を行います。

以下に、httpd.confの設定例を示します。

    
    LoadModule expires_module modules/mod_expires.so
    
    Alias /is_web "/var/www/infoscoop/staticContent"  
    <Location /is_web >  
      <IfModule mod_expires.c>  
        ExpiresActive On  
        ExpiresByType image/jpg "access plus 1 month"  
        ExpiresByType image/jpeg "access plus 1 month"  
        ExpiresByType image/gif "access plus 1 month"  
        ExpiresByType image/png "access plus 1 month"  
      </IfModule>  
    </Location>

上記の設定は、staticContentを/var/www/infoscoop/staticContentにコピーし、エイリアスをis_webに設定して、1
ヶ月間キャッシュを有効にしています。

    デフォルト値：.(コンテキストパスからの相対パス)

<a name="9_2_gadgetProxyURL"></a>
### 9.3 gadgetProxyURL

infoScoop上に表示されるガジェットのコンテンツはinfoScoopのAjaxプロキシを通して表示されます。つまり、ガジェットはinfoScoopと同
一ドメインのコンテンツとして表示されるためクロスドメインスクリプトの問題が発生してしまいます。

以下の図は、Webブラウザ上で外部のガジェットがinfoScoop本体や、他のガジェットのJavaScriptオブジェクトにアクセス可能なことを示しています
。

![Invalid Access of Gadgets]

クロスドメイン問題を解決するためには、本製品上に表示される全てのガジェットを別ドメインで実行する必要がありますが、通常、そのようなインフラを用意することは難
しいと考えられます。

そこで、infoScoopは、外部のガジェット(URL指定でアクセスするガジェット)とinfoScoopとinfoScoopにアップロードされているガジェッ
トが別ドメインで実行させるためのプロパティを用意しています。


![Run Gadgets in Other Domain]

gadgetProxyURLは、このガジェットを処理するプロキシのURLを指定します。

    デフォルト値：./gadgetsrv

このURLは、別ドメインでアクセス可能なinfoScoopのコンテキストに「./gadgetsrv」を付けて指定します。

例えば、本製品のコンテキストを以下のようなドメインで用意した場合：

infoScoop用のURL： `http://infoscoop/infoscoop/`

ガジェットプロキシ用のURL： `http://gadgetproxy/infoscoop/`

gadgetProxyURLには「`http://gadgetproxy/infoscoop/gadgetsrv`」を指定します。

**注意** gadget.pubsubおよびgadget.rpcの機能は、クロスドメインスクリプトの問題の対象ではありません。

プロパティ値にワイルドカードを含む URL を指定することで、それぞれのガジェットを別ドメインで動作させることができます。

例:http://*.infoscoop.test/infoscoop/gadgetsrv

**注意** この機能を利用するには、ワイルドカードで名前解決をする設定をDNSに追加する必要があります。

### 9.3 messagePriority

メッセージコンソールに表示する、情報のレベルを設定します。

以下のいずれかの数値をしています。

    1:デバッグ
    2:情報
    3:警告
    4:エラー
    デフォルト値：1

例えば、3を指定した場合は警告以上のメッセージのみメッセージコンソールに表示されます。

1～4以外の値を入力した場合は、デフォルト値が適用されます。

### 9.4 searchEngineURL

外部の検索エンジン設定ファイルを取得するためのURLを指定します。

[検索サイト管理][Search Form Administration]の手順で設定した検索設定を有効にする場合は空を指定してください。

    デフォルト値：設定なし

**注意** 本プロパティの変更はサポート対象外になります。バージョンアップ時の互換性は保障されません。

### 9.4 loginCredentialAuthType

本製品の標準ログイン画面で入力したログイン情報を認証ガジェット機構で使用する認証情報として自動的に登録する場合に、適用される認証タイプを指定します。

    basic：基本認証
    ntlm：NTLM認証
    postCredential：認証情報をPOSTする
    選択しない：認証情報を登録しない

上記以外の値を入力した場合は、不正な認証タイプとして扱われ、認証ガジェット機構が動作しません。

運用中に本設定を変更した場合、次回ユーザーログイン時に新しく設定された認証タイプの認証情報が新しくシステムの認証情報として登録されます。この際、古い認証情報は
通常の認証情報に降格し設定されているガジェットがなければ自動的に削除されます。

**注意** この設定は［プロキシ］タブ内の［社内］チェックボックスが有効になっている場合、適用されます。［社内］チェックボックスの設定については、管理ガイドの<a href="proxy-settings.md#proxy_manage_intranet">6 社内（イントラネット）設定</a>を参照してください。


[Menu Settings]: menu-settings.md "メニュー管理"
[Proxy Settings]: proxy-settings.md "プロキシ管理"
[Auto Update]: ../user-guide/auto-update.md "自動更新"
[Search Form Administration]: search-form-administration.md "検索サイト管理"
[Gadget-Settings]: gadget-setings.md#date-format
[Invalid Access of Gadgets]: images/properties-manager/properties-settings-1.png "ガジェットの不正アクセス"
[Run Gadgets in Other Domain]: images/properties-manager/properties-settings-2.png "ガジェットを別ドメインで実行"